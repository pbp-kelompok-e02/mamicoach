<div class="session-item p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors" 
     data-session-id="{{ session.id }}" 
     onclick="selectSession('{{ session.id }}')">
    <div class="flex items-center">
        <!-- Profile Picture / Avatar -->
        <div class="w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center mr-3 flex-shrink-0">
            <span class="font-semibold">
                {{ session.other_user.first_name.0|default:session.other_user.username.0|upper }}
            </span>
        </div>
        
        <!-- Chat Info -->
        <div class="flex-1 min-w-0">
            <div class="flex justify-between items-start">
                <h3 class="session-name font-semibold text-gray-900 truncate">
                    {{ session.other_user.first_name }} {{ session.other_user.last_name|default:session.other_user.username }}
                </h3>
                <span class="text-xs text-gray-500 ml-2">
                    {{ session.last_message_time|date:"H:i"|default:"" }}
                </span>
            </div>
            
            <div class="flex justify-between items-center mt-1">
                <p class="last-message text-sm text-gray-600 truncate flex-1">
                    {% if session.last_message %}
                        {% if session.last_message.sender == request.user %}
                            <span class="text-gray-400">You: </span>
                        {% endif %}
                        {{ session.last_message.content|truncatechars:30 }}
                    {% else %}
                        <span class="text-gray-400 italic">No messages yet</span>
                    {% endif %}
                </p>
                
                <!-- Unread indicator -->
                {% if session.unread_count > 0 %}
                <span class="bg-primary text-white text-xs rounded-full px-2 py-1 ml-2 min-w-0">
                    {{ session.unread_count }}
                </span>
                {% endif %}
            </div>
        </div>
    </div>
</div>